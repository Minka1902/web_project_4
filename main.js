!function(){"use strict";class e{constructor(e,t){this._form=t,this._setSettings(e)}_setSettings(e){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputs=[...this._form.querySelectorAll(this._inputSelector)]}enableValidation(){this._formSelector&&(this._form.addEventListener("submit",(e=>e.preventDefault())),this._inputs.forEach((e=>{e.addEventListener("input",(e=>{this._handleInputEvent(e.target),this.validateButton()}))})))}_handleInputEvent(e){const t=e.parentElement.querySelector(".".concat(e.id,"-error"));this._checkInputValidity(e)?(this._hideErrorMessage(t,this._errorClass),e.classList.remove(this._inputErrorClass)):(this._showErrorMessage(t,this._errorClass),e.classList.add(this._inputErrorClass))}_checkFormValidity(){let e=!0;for(let t=0;t<this._inputs.length;t++)this._checkInputValidity(this._inputs[t])||(e=!1);return e}_hideErrorMessage(e){e.classList.remove(this._errorClass)}_showErrorMessage(e){e.classList.add(this._errorClass)}validateButton(){this._checkFormValidity()?this.toggleButtonState(!0):this.toggleButtonState(!1)}_checkInputValidity(e){return e.validity.valid}toggleButtonState(e){e?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}}class t{constructor(e){var t,s;s=e=>{"Escape"==e.code&&this.close(this._element.classList[1])},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._isOpen=!1,this._element=document.querySelector(e)}open(){this._isOpen=!0,document.addEventListener("keydown",this._handleEscClose),this._element.classList.add("popup_opened")}close(){this._isOpen=!1,this._element&&this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}querySelector(e){return this._element.querySelector(e)}checkIfOpened(){return this._isOpen}setEventListeners(){this._element.querySelector(".popup__close-button").addEventListener("click",(e=>{this.close(e.target.closest(".popup").classList[1])})),this._element.addEventListener("mousedown",(e=>{e.target.classList.contains("popup_opened")&&this.close(e.target.classList[1])}))}}class s extends t{constructor(e,t){super(e),this._submit=t,this._form=this._element.querySelector(".popup__form"),this._inputs=this._element.querySelectorAll(".popup__input"),this._button=this._element.querySelector(".popup__button")}close(e){super.close(),e||this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{this._button.textContent="Saving...",this._submit(e)}))}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e,t,s,n,r,o,a,l,c){i(this,"handleClick",(e=>{this._owner._id===this._user.id&&(this._deleteCard(),e.deleteCard(this._cardId).then((()=>{this._confirmPopup.close()})).finally((()=>{this._confirmPopup.querySelector(".popup__button").textContent="Yes"})).catch((e=>{console.log(e)})),this._confirmPopup.querySelector(".popup__button").textContent="Deleting...")})),i(this,"_setEventListeners",(e=>{this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.contains("info__card_like-button_state_active")||(this._justClicked=!0),this._checkLikes(e)})),this._cardDelete.addEventListener("click",(()=>{this._confirmPopup.open(this.handleClick,e)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({url:this._link,caption:this._name})}))})),this._cardTemplate=e,this._name=t,this._link=s,this._cardId=n,this._likes=r,this._handleImageClick=o,this._confirmPopup=a,this._owner=l,this._user=c}generateCard(e){return this._createCard(),this._setEventListeners(e),this._toggleLikes(),this._element}_createCard(){this._element=this._getTemplate();const e=this._element;return this._cardImage=e.querySelector(".card__image"),e.querySelector(".card__text").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt="A view of ".concat(this._name),this._likeNumber=this._element.querySelector(".card__like-number"),this._likeNumber.textContent=this.getLikeNumber(),e}_setCardLikes(){this._likeNumber.textContent=this.getLikeNumber()}_getTemplate(){const e=document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0);return this._cardDelete=e.querySelector(".card__delete"),this._owner&&this._owner._id!==this._user.id&&this._cardDelete.classList.add("card__delete_hidden"),e}getLikeNumber(){return this._likes?this._likes.length:0}_isLiked(){for(let e=0;e<this._likes.length;e++)return this._likes[e]._id===this._user.id}_checkLikes(e){this._justClicked?(this._likes&&(this._likes[this._likes.length]=this._user),e.addLike(this._cardId).then((()=>{this._likeNumber.textContent=this.getLikeNumber(),this._likeButton.classList.add("info__card_like-button_state_active")})),this._justClicked=!1):e.removeLike(this._cardId).then((e=>{this._likes=e.likes,this._likeNumber.textContent=this.getLikeNumber(),this._likeButton.classList.remove("info__card_like-button_state_active")})).catch((e=>{console.log(e)})),this._setCardLikes()}_toggleLikes(){if(this._likes)for(let e=0;e<this._likes.length;e++)this._likes[e]._id===this._user.id&&this._likeButton.classList.add("info__card_like-button_state_active")}_deleteCard(){this._element.remove()}}const r=new class{constructor(e){let{name:t,job:s,avatar:i}=e;this._about=document.querySelector(s),this._name=document.querySelector(t),this._avatar=document.querySelector(i)}getUserInfo(){return{name:this._name.textContent,job:this._about.textContent,avatar:this._avatar.src}}createMe(e){this.me=e,this.id=e._id}getMe(){return this.me}setUserInfo(e){this._about.textContent=e.about,this._name.textContent=e.name,e.avatar&&(this._avatar.src=e.avatar)}setUserUrl(e){this._avatar.src=e}}({name:".profile__name",job:".profile__about-me",avatar:".profile__avatar"}),o=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__image-button"),c=new s(".popup_profile",(function(e){e.preventDefault();const t={name:y.value,about:C.value};r.setUserInfo(t),S.changeUserInfo(y,C).finally((()=>{c.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),q()})),h=new class extends t{constructor(e,t){super(e),this._button=this._element.querySelector(t),this._isOpen=!1}open(e,t){super.open(),this._api=t,this._handleClick=e,this._button.addEventListener("click",(()=>{this._handleClick(this._api)}))}close(){super.close(),this._button.removeEventListener("click",(()=>{this._handleClick(this._api)}))}}(".popup_confirm",".popup__button"),_=new s(".popup_add",(function(e){e.preventDefault(),S.addCard(L,E).then((e=>{B.addItem({name:L.value,link:E.value,likes:[],owner:r.getMe(),id:e._id}),m.reset()})).finally((()=>{_.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),v.toggleButtonState(!1),w()})),u=new s(".popup_avatar",(function(e){e.preventDefault(),r.setUserUrl(g.value),S.changeAvatar(g).finally((()=>{u.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),U()})),d=new class extends t{constructor(e,t,s){var i,n;super(e),n=e=>{let{caption:t,url:s}=e;super.open(),this._image.setAttribute("src",s),this._image.setAttribute("alt",t),this._element.querySelector(".popup__text").textContent=t},(i="open")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this.open=n,this._url=t,this._caption=s,this._image=this._element.querySelector(".popup__image")}}(".popup_image"),p=document.getElementById("editform"),m=document.getElementById("addform"),k={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-massage_visible"},b=new e(k,document.getElementById("avatarform")),v=new e(k,m),f=new e(k,p),g=document.getElementById("avatar"),y=document.getElementById("popupname"),C=document.getElementById("popupaboutme"),L=document.getElementById("title"),E=document.getElementById("imagelink"),S=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():"Error ".concat(e.status)}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}addLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}removeLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}addCard(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.value,link:t.value})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}changeAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.value})}).then((e=>this._checkResponse(e)))}changeUserInfo(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.value,about:t.value})}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"614bb6fa-36a6-4d24-9b95-72bf17bccf61","Content-Type":"application/json"}}),I=[],B=new class{constructor(e,t,s){let{items:i,renderer:n}=e;this._renderer=n,this._items=i,this._api=s,this._element=document.querySelector(t)}addItem(e){const t=this._renderer(e,this._api);this._element.prepend(t)}render(){for(let e=0;e<this._items.length;e++)this.addItem(this._items[e])}}({items:I,renderer:function(e,t){return new n("#cardtemplate",e.name,e.link,e.id,e.likes,x,h,e.owner,r).generateCard(t)}},".cards",S);function q(){if(c.checkIfOpened())c.close();else{c.open();const{name:e,job:t}=r.getUserInfo();y.value=e,C.value=t}}function w(){_.checkIfOpened()?_.close(!0):_.open()}function U(){u.checkIfOpened()?u.close():u.open()}function x(e){let{url:t,caption:s}=e;d.open({url:t,caption:s})}c.setEventListeners(),h.setEventListeners(),_.setEventListeners(),u.setEventListeners(),d.setEventListeners(),b.enableValidation(),v.enableValidation(),f.enableValidation(),a.addEventListener("click",w),o.addEventListener("click",q),l.addEventListener("click",U),Promise.all([S.getUserInfo(),S.getInitialCards()]).then((e=>{let[t,s]=e;const i={};r.createMe(t),i.name=t.name,i.about=t.about,i.avatar=t.avatar,r.setUserInfo(i);for(let e=0;e<s.length;e++){const t=s.length-1,i={name:s[t-e].name,link:s[t-e].link,id:s[t-e]._id,likes:s[t-e].likes,owner:s[t-e].owner};I[e]=i}B.render()})).catch((e=>{console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBLG9CQUNsQ3ZILE1BQUssSUFBd0IsSUFBdEIwSCxFQUFVQyxHQUFZLEVBQzFCLE1BQU1DLEVBQWEsR0FDbkJMLEVBQUFBLFNBQXlCRyxHQUN6QkUsRUFBVzNJLEtBQU95SSxFQUFTekksS0FDM0IySSxFQUFXeEUsTUFBUXNFLEVBQVN0RSxNQUM1QndFLEVBQVdsRixPQUFTZ0YsRUFBU2hGLE9BQzdCNkUsRUFBQUEsWUFBNEJLLEdBRTVCLElBQUssSUFBSTNLLEVBQUksRUFBR0EsRUFBSTBLLEVBQU96SyxPQUFRRCxJQUFLLENBQ3BDLE1BQU00SyxFQUFNRixFQUFPekssT0FBUyxFQUN0Qm9LLEVBQVUsQ0FDWnJJLEtBQU0wSSxFQUFPRSxFQUFNNUssR0FBR2dDLEtBQ3RCQyxLQUFNeUksRUFBT0UsRUFBTTVLLEdBQUdpQyxLQUN0QjFDLEdBQUltTCxFQUFPRSxFQUFNNUssR0FBRzBDLElBQ3BCUCxNQUFPdUksRUFBT0UsRUFBTTVLLEdBQUdtQyxNQUN2QkcsTUFBT29JLEVBQU9FLEVBQU01SyxHQUFHc0MsT0FFM0JnSSxFQUFpQnRLLEdBQUtxSyxFQUUxQkMsRUFBQUEsWUFDRHBILE9BQU9DLElBQ05DLFFBQVFDLElBQUlGLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtVG9WYWxpZGF0ZSkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtVG9WYWxpZGF0ZTtcclxuICAgICAgICB0aGlzLl9zZXRTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFNldHRpbmdzKHNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fZm9ybVNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRFdmVudChldnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vICEgdGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBlcnJvciBtYXNzYWdlIHN0YXRlIGFjY29yZGluZyB0byB0aGUgaW5wdXQgdmFsaWRpdHlcclxuICAgIF9oYW5kbGVJbnB1dEV2ZW50KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlLCB0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93RXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSwgdGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vICEgdGhpcyBmdW5jdGlvbiBjaGVja2VzIGlmIHRoZSBmb3JtIGlzIHZhbGlkXHJcbiAgICBfY2hlY2tGb3JtVmFsaWRpdHkoKSB7XHJcbiAgICAgICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9pbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KHRoaXMuX2lucHV0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICEgdGhpcyBmdW5jdGlvbiBoaWRlcyB0aGUgZXJyb3IgbWFzc2FnZVxyXG4gICAgX2hpZGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gISB0aGlzIGZ1bmN0aW9uIHNob3dzIHRoZSBlcnJvciBtYXNzYWdlXHJcbiAgICBfc2hvd0Vycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gaGFuZGxlcyB0aGUgYnV0dG9uIHN0YXRlIGFjY29yZGluZyB0byB0aGUgZm9ybSB2YWxpZGl0eVxyXG4gICAgdmFsaWRhdGVCdXR0b24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gISB0aGlzIGZ1bmN0aW9uIGNoZWNrZXMgaWYgdGhlIGlucHV0IGlzIHZhbGlkXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gISB0aGlzIGZ1bmN0aW9uIHRvZ2dsZXMgYnV0dG9uIHN0YXRlXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShpc1ZhbGlkKSB7XHJcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2dC5jb2RlID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSh0aGlzLl9lbGVtZW50LmNsYXNzTGlzdFsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrSWZPcGVuZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzT3BlbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKGV2dC50YXJnZXQuY2xvc2VzdChcIi5wb3B1cFwiKS5jbGFzc0xpc3RbMV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoZXZ0LnRhcmdldC5jbGFzc0xpc3RbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKGNsYXNzU2VsZWN0b3IsIHN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKGNsYXNzU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdCA9IHN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZShpc0FkZGVkKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICBpZiAoIWlzQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXQoZXZ0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoY2FyZFRlbXBsYXRlLCBuYW1lLCBsaW5rLCBjYXJkSWQsIGxpa2VzLCBoYW5kbGVJbWFnZUNsaWNrLCBjb25maXJtUG9wdXAsIG93bmVyLCB1c2VyKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1Qb3B1cCA9IGNvbmZpcm1Qb3B1cDtcclxuICAgICAgICB0aGlzLl9vd25lciA9IG93bmVyO1xyXG4gICAgICAgIHRoaXMuX3VzZXIgPSB1c2VyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICogKiB0aGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyB0aGUgY2FyZCBcclxuICAgIGdlbmVyYXRlQ2FyZChhcGkpIHtcclxuICAgICAgICB0aGlzLl9jcmVhdGVDYXJkKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoYXBpKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVMaWtlcygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vICogKiB0aGlzIGZ1bmN0aW9uIHNldHMgYWxsIHRoZSBpbmZvIG9mIHRoZSBjYXJkXHJcbiAgICBfY3JlYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5fZWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBgQSB2aWV3IG9mICR7IHRoaXMuX25hbWUgfWA7XHJcbiAgICAgICAgdGhpcy5fbGlrZU51bWJlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLW51bWJlclwiKTtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5nZXRMaWtlTnVtYmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldENhcmRMaWtlcygpIHtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5nZXRMaWtlTnVtYmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKiAqIHRoaXMgZnVuY3Rpb24gY3JlYXRlcyB0aGUgY2FyZCB0ZW1wbGF0ZVxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZERlbGV0ZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICBpZiAoISh0aGlzLl9vd25lci5faWQgPT09IHRoaXMuX3VzZXIuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXJkRGVsZXRlLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19kZWxldGVfaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMaWtlTnVtYmVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9saWtlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDbGljayA9IChhcGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXIuX2lkID09PSB0aGlzLl91c2VyLmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcclxuICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAqICogdGhpcyBmdW5jdGlvbiBjcmVhdGVzIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoYXBpKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fanVzdENsaWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrTGlrZXMoYXBpKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLm9wZW4odGhpcy5oYW5kbGVDbGljaywgYXBpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyB1cmw6IHRoaXMuX2xpbmssIGNhcHRpb246IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzTGlrZWQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saWtlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZXNbaV0uX2lkID09PSB0aGlzLl91c2VyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vICogKiB0aGlzIGZ1bmN0aW9uIHRvZ2dsZXMgbGlrZXMgZm9yIHRoZSBjYXJkc1xyXG4gICAgX2NoZWNrTGlrZXMoYXBpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2p1c3RDbGlja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saWtlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZXNbdGhpcy5fbGlrZXMubGVuZ3RoXSA9IHRoaXMuX3VzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBpLmFkZExpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9qdXN0Q2xpY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwaS5yZW1vdmVMaWtlKHRoaXMuX2NhcmRJZClcclxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRDYXJkTGlrZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTGlrZXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpa2VzKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlrZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9saWtlc1tpXS5faWQgPT09IHRoaXMuX3VzZXIuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAqICogdGhpcyBmdW5jdGlvbiBkZWxldGVzIHRoZSBjYXJkXHJcbiAgICBfZGVsZXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG59OyIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCJcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcblxyXG4vLyAhIHVzZXJcclxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLCBqb2I6IFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIsIGF2YXRhcjogXCIucHJvZmlsZV9fYXZhdGFyXCIgfSk7XHJcblxyXG4vLyAhIGJ1dHRvbnNcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1idXR0b25cIik7XHJcblxyXG4vLyAhIHBvcHVwXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9wcm9maWxlXCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cENvbmZpcm0oXCIucG9wdXBfY29uZmlybVwiLCBcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9hZGRcIiwgaGFuZGxlQWRkRm9ybVN1Ym1pdCk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2F2YXRhclwiLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfaW1hZ2VcIik7XHJcblxyXG4vLyAhIGZvcm1zXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRmb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZGZvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXZhdGFyZm9ybVwiKTtcclxuY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2ludmFsaWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3ItbWFzc2FnZV92aXNpYmxlXCJcclxufTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGF2YXRhckZvcm1FbGVtZW50KVxyXG5leHBvcnQgY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpO1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGVkaXRGb3JtRWxlbWVudCk7XHJcblxyXG4vLyAhIGlucHV0c1xyXG5leHBvcnQgY29uc3QgYXZhdGFyVXJsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9wdXBuYW1lXCIpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvcHVwYWJvdXRtZVwiKTtcclxuXHJcbi8vICFpbnB1dCBoZWxwXHJcbmNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpO1xyXG5jb25zdCBpbWFnZUxpbmtJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VsaW5rXCIpO1xyXG5cclxuXHJcbi8vICEgYXBpXHJcbmNvbnN0IGFwaU9wdGlvbnMgPSB7XHJcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjYxNGJiNmZhLTM2YTYtNGQyNC05Yjk1LTcyYmYxN2JjY2Y2MVwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpT3B0aW9ucyk7XHJcblxyXG4vLyAhIHNlY3Rpb25cclxuZXhwb3J0IGNvbnN0IGNhcmRzRGF0YSA9IFtdO1xyXG5leHBvcnQgY29uc3QgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBpdGVtczogY2FyZHNEYXRhLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LCBcIi5jYXJkc1wiLCBhcGkpO1xyXG5cclxuLy8gISBjcmVhdGUgY2FyZHNcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkT2JqLCBhcGkpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgICBcIiNjYXJkdGVtcGxhdGVcIixcclxuICAgICAgICBjYXJkT2JqLm5hbWUsXHJcbiAgICAgICAgY2FyZE9iai5saW5rLFxyXG4gICAgICAgIGNhcmRPYmouaWQsXHJcbiAgICAgICAgY2FyZE9iai5saWtlcyxcclxuICAgICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgICAgIGNvbmZpcm1Qb3B1cCxcclxuICAgICAgICBjYXJkT2JqLm93bmVyLFxyXG4gICAgICAgIHVzZXJJbmZvKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoYXBpKTtcclxufVxyXG5cclxuLy8gISBlZGl0IHBvcHVwIGFuZCBmb3JtIGhhbmRsaW5nXHJcbi8vICogdGhpcyBmdW5jdGlvbiB0b2dnbGVzIHRoZSBwb3B1cCB3aW5kb3cgZm9yIHRoZSBlZGl0IHdpbmRvdyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUVkaXRQb3B1cFdpbmRvdygpIHtcclxuICAgIGlmICghcHJvZmlsZVBvcHVwLmNoZWNrSWZPcGVuZWQoKSkge1xyXG4gICAgICAgIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgICAgICAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICAgICAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gICAgICAgIGpvYklucHV0LnZhbHVlID0gam9iO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gKiBlZGl0IGZvcm0gaGFuZGxlXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgdXNlck9iaiA9IHsgbmFtZTogbmFtZUlucHV0LnZhbHVlLCBhYm91dDogam9iSW5wdXQudmFsdWUgfTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJPYmopO1xyXG5cclxuICAgIGFwaS5jaGFuZ2VVc2VySW5mbyhuYW1lSW5wdXQsIGpvYklucHV0KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB0b2dnbGVFZGl0UG9wdXBXaW5kb3coKTtcclxufVxyXG5cclxuLy8gISBhZGQgcG9wdXAgYW5kIGZvcm0gaGFuZGxpbmdcclxuLy8gKiB0aGlzIGZ1bmN0aW9uIHRvZ2dsZXMgdGhlIHBvcHVwIHdpbmRvdyBmb3IgdGhlIGFkZCB3aW5kb3cgXHJcbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVBZGRQb3B1cFdpbmRvdygpIHtcclxuICAgIGlmICghYWRkUG9wdXAuY2hlY2tJZk9wZW5lZCgpKSB7XHJcbiAgICAgICAgYWRkUG9wdXAub3BlbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhZGRQb3B1cC5jbG9zZSh0cnVlKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vICogYWRkIGZvcm0gaGFuZGxlXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgYXBpLmFkZENhcmQodGl0bGVJbnB1dCwgaW1hZ2VMaW5rSW5wdXQpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdGl0bGVJbnB1dC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGltYWdlTGlua0lucHV0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgbGlrZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgb3duZXI6IHVzZXJJbmZvLmdldE1lKCksXHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5faWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFkZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGFkZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKGZhbHNlKTtcclxuICAgIHRvZ2dsZUFkZFBvcHVwV2luZG93KCk7XHJcbn1cclxuXHJcbi8vICEgYXZhdGFyIHBvcHVwIGFuZCBmb3JtIGhhbmRsaW5nXHJcbi8vICogdGhpcyBmdW5jdGlvbiB0b2dnbGVzIHRoZSBwb3B1cCB3aW5kb3cgZm9yIHRoZSBhdmF0YXIgd2luZG93IFxyXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlQXZhdGFyUG9wdXBXaW5kb3coKSB7XHJcbiAgICBpZiAoIWF2YXRhclBvcHVwLmNoZWNrSWZPcGVuZWQoKSkge1xyXG4gICAgICAgIGF2YXRhclBvcHVwLm9wZW4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gKiBhdmF0YXIgZm9ybSBoYW5kbGVcclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB1c2VySW5mby5zZXRVc2VyVXJsKGF2YXRhclVybElucHV0LnZhbHVlKTtcclxuXHJcbiAgICBhcGkuY2hhbmdlQXZhdGFyKGF2YXRhclVybElucHV0KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgYXZhdGFyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRvZ2dsZUF2YXRhclBvcHVwV2luZG93KCk7XHJcbn1cclxuXHJcbi8vICEgaW1hZ2UgcG9wdXAgaGFuZGxlXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHsgdXJsLCBjYXB0aW9uIH0pIHtcclxuICAgIGltYWdlUG9wdXAub3Blbih7IHVybCwgY2FwdGlvbiB9KTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZTogbmFtZVNlbGVjdG9yLCBqb2I6IGFib3V0U2VsZWN0b3IsIGF2YXRhcjogYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZU1lKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLm1lID0gZGF0YU9iajtcclxuICAgICAgICB0aGlzLmlkID0gZGF0YU9iai5faWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8odXNlckluZm8pIHtcclxuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgICAgIGlmICh1c2VySW5mby5hdmF0YXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJJbmZvLmF2YXRhcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlclVybChhdmF0YXJVcmwpIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyVXJsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBidXR0b25TZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihoYW5kbGVDbGljaywgYXBpKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX2FwaSA9IGFwaTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDbGljayA9IGhhbmRsZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLl9oYW5kbGVDbGljayh0aGlzLl9hcGkpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuX2hhbmRsZUNsaWNrKHRoaXMuX2FwaSkgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgdXJsLCBjYXB0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb24gPSBjYXB0aW9uO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuID0gKHsgY2FwdGlvbiwgdXJsIH0pID0+IHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIHVybCk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGNhcHRpb24pO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IGNhcHRpb247XHJcbiAgICB9XHJcbn0iLCIvL3tcclxuLy8gXHRiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuLy8gXHRoZWFkZXJzOiB7XHJcbi8vIFx0XHRhdXRob3JpemF0aW9uOiBcIjYxNGJiNmZhLTM2YTYtNGQyNC05Yjk1LTcyYmYxN2JjY2Y2MVwiLFxyXG4vLyBcdFx0Q29udGVudDogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuLy8gXHR9XHJcbi8vfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsgLy8gaGVhZGVyID0ge2F1dGhvcml6YXRpb246ICwgXCJDb250ZW50LVR5cGVcIjogfVxyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICAgIH1cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgRXJyb3IgJHtyZXMuc3RhdHVzfWA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb25cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb25cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTGlrZShpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZENhcmQodGl0bGVJbnB1dCwgaW1hZ2VMaW5rSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGl0bGVJbnB1dC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBpbWFnZUxpbmtJbnB1dC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUF2YXRhcihhdmF0YXJVcmxJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBhdmF0YXJVcmxJbnB1dC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlVXNlckluZm8obmFtZUlucHV0LCBqb2JJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lSW5wdXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQ6IGpvYklucHV0LnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3RvciwgYXBpKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2FwaSA9IGFwaTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0sIHRoaXMuX2FwaSk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9pdGVtc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiIGltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbiBpbXBvcnQgKiBhcyBjb25zdHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5cclxuIGNvbnN0cy5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIGNvbnN0cy5jb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIGNvbnN0cy5hZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gY29uc3RzLmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiBjb25zdHMuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuIGNvbnN0cy5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIGNvbnN0cy5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIGNvbnN0cy5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4gLy8gISBjYWxsaW5nIGV2ZW50IGxpc3RlbmVyc1xyXG4gY29uc3RzLmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29uc3RzLnRvZ2dsZUFkZFBvcHVwV2luZG93KTtcclxuXHJcbiBjb25zdHMuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29uc3RzLnRvZ2dsZUVkaXRQb3B1cFdpbmRvdyk7XHJcblxyXG4gY29uc3RzLmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29uc3RzLnRvZ2dsZUF2YXRhclBvcHVwV2luZG93KTtcclxuXHJcbiBQcm9taXNlLmFsbChbY29uc3RzLmFwaS5nZXRVc2VySW5mbygpLCBjb25zdHMuYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAgICAudGhlbigoW3VzZXJEYXRhLCBmQ2FyZHNdKSA9PiB7XHJcbiAgICAgICAgIGNvbnN0IHVzZXJPYmplY3QgPSB7fTtcclxuICAgICAgICAgY29uc3RzLnVzZXJJbmZvLmNyZWF0ZU1lKHVzZXJEYXRhKTtcclxuICAgICAgICAgdXNlck9iamVjdC5uYW1lID0gdXNlckRhdGEubmFtZTtcclxuICAgICAgICAgdXNlck9iamVjdC5hYm91dCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgICAgICB1c2VyT2JqZWN0LmF2YXRhciA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgICAgICAgY29uc3RzLnVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJPYmplY3QpO1xyXG5cclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmQ2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgIGNvbnN0IGxlbiA9IGZDYXJkcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgY29uc3QgY2FyZE9iaiA9IHtcclxuICAgICAgICAgICAgICAgICBuYW1lOiBmQ2FyZHNbbGVuIC0gaV0ubmFtZSxcclxuICAgICAgICAgICAgICAgICBsaW5rOiBmQ2FyZHNbbGVuIC0gaV0ubGluayxcclxuICAgICAgICAgICAgICAgICBpZDogZkNhcmRzW2xlbiAtIGldLl9pZCxcclxuICAgICAgICAgICAgICAgICBsaWtlczogZkNhcmRzW2xlbiAtIGldLmxpa2VzLFxyXG4gICAgICAgICAgICAgICAgIG93bmVyOiBmQ2FyZHNbbGVuIC0gaV0ub3duZXJcclxuICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICBjb25zdHMuY2FyZHNEYXRhW2ldID0gY2FyZE9iajtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBjb25zdHMuY2FyZHNTZWN0aW9uLnJlbmRlcigpO1xyXG4gICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICB9KTsiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtVG9WYWxpZGF0ZSIsInRoaXMiLCJfZm9ybSIsIl9zZXRTZXR0aW5ncyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiZXZ0IiwiX2hhbmRsZUlucHV0RXZlbnQiLCJ0YXJnZXQiLCJ2YWxpZGF0ZUJ1dHRvbiIsImVycm9yTWVzc2FnZSIsInBhcmVudEVsZW1lbnQiLCJpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGlkZUVycm9yTWVzc2FnZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIl9zaG93RXJyb3JNZXNzYWdlIiwiYWRkIiwiX2NoZWNrRm9ybVZhbGlkaXR5IiwiaXNWYWxpZCIsImkiLCJsZW5ndGgiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNvZGUiLCJjbG9zZSIsIl9lbGVtZW50IiwiX2lzT3BlbiIsImRvY3VtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGFzc05hbWUiLCJjaGVja0lmT3BlbmVkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjbG9zZXN0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiY2xhc3NTZWxlY3RvciIsInN1Ym1pdCIsInN1cGVyIiwiX3N1Ym1pdCIsIl9idXR0b24iLCJpc0FkZGVkIiwicmVzZXQiLCJ0ZXh0Q29udGVudCIsIkNhcmQiLCJjYXJkVGVtcGxhdGUiLCJuYW1lIiwibGluayIsImNhcmRJZCIsImxpa2VzIiwiaGFuZGxlSW1hZ2VDbGljayIsImNvbmZpcm1Qb3B1cCIsIm93bmVyIiwidXNlciIsImFwaSIsIl9vd25lciIsIl9pZCIsIl91c2VyIiwiX2RlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwiX2NhcmRJZCIsInRoZW4iLCJfY29uZmlybVBvcHVwIiwiZmluYWxseSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIl9saWtlQnV0dG9uIiwiX2p1c3RDbGlja2VkIiwiX2NoZWNrTGlrZXMiLCJfY2FyZERlbGV0ZSIsImhhbmRsZUNsaWNrIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwidXJsIiwiX2xpbmsiLCJjYXB0aW9uIiwiX25hbWUiLCJfY2FyZFRlbXBsYXRlIiwiX2xpa2VzIiwiZ2VuZXJhdGVDYXJkIiwiX2NyZWF0ZUNhcmQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdG9nZ2xlTGlrZXMiLCJfZ2V0VGVtcGxhdGUiLCJjYXJkIiwic3JjIiwiYWx0IiwiX2xpa2VOdW1iZXIiLCJnZXRMaWtlTnVtYmVyIiwiX3NldENhcmRMaWtlcyIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9pc0xpa2VkIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJkYXRhIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyIiwiYXZhdGFyU2VsZWN0b3IiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJjcmVhdGVNZSIsImRhdGFPYmoiLCJtZSIsImdldE1lIiwic2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJVcmwiLCJhdmF0YXJVcmwiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwicHJvZmlsZVBvcHVwIiwidXNlck9iaiIsIm5hbWVJbnB1dCIsInZhbHVlIiwiam9iSW5wdXQiLCJjaGFuZ2VVc2VySW5mbyIsInRvZ2dsZUVkaXRQb3B1cFdpbmRvdyIsImJ1dHRvblNlbGVjdG9yIiwiX2FwaSIsIl9oYW5kbGVDbGljayIsImFkZFBvcHVwIiwiYWRkQ2FyZCIsInRpdGxlSW5wdXQiLCJpbWFnZUxpbmtJbnB1dCIsImNhcmRzU2VjdGlvbiIsImFkZEl0ZW0iLCJhZGRGb3JtRWxlbWVudCIsImFkZEZvcm1WYWxpZGF0b3IiLCJ0b2dnbGVBZGRQb3B1cFdpbmRvdyIsImF2YXRhclBvcHVwIiwiYXZhdGFyVXJsSW5wdXQiLCJjaGFuZ2VBdmF0YXIiLCJ0b2dnbGVBdmF0YXJQb3B1cFdpbmRvdyIsImltYWdlUG9wdXAiLCJfaW1hZ2UiLCJzZXRBdHRyaWJ1dGUiLCJfdXJsIiwiX2NhcHRpb24iLCJlZGl0Rm9ybUVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZvcm1TZXR0aW5ncyIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwiYXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZHNEYXRhIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVyIiwiY2FyZE9iaiIsImNvbnN0cyIsIlByb21pc2UiLCJhbGwiLCJ1c2VyRGF0YSIsImZDYXJkcyIsInVzZXJPYmplY3QiLCJsZW4iXSwic291cmNlUm9vdCI6IiJ9