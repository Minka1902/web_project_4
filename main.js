!function(){"use strict";class e{constructor(e,t){this._form=t,this._setSettings(e)}_setSettings(e){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputs=[...this._form.querySelectorAll(this._inputSelector)]}enableValidation(){this._formSelector&&(this._form.addEventListener("submit",(e=>e.preventDefault())),this._inputs.forEach((e=>{e.addEventListener("input",(e=>{this._handleInputEvent(e.target),this.validateButton()}))})))}_handleInputEvent(e){const t=e.parentElement.querySelector(".".concat(e.id,"-error"));this._checkInputValidity(e)?(this._hideErrorMessage(t,this._errorClass),e.classList.remove(this._inputErrorClass)):(this._showErrorMessage(t,this._errorClass),e.classList.add(this._inputErrorClass))}_checkFormValidity(){const e=[...this._form.querySelectorAll(this._inputSelector)];let t=!0;for(let s=0;s<e.length;s++)this._checkInputValidity(e[s])||(t=!1);return t}_hideErrorMessage(e){e.classList.remove(this._errorClass)}_showErrorMessage(e){e.classList.add(this._errorClass)}validateButton(){this._checkFormValidity()?this.toggleButtonState(!0):this.toggleButtonState(!1)}_checkInputValidity(e){return e.validity.valid}toggleButtonState(e){e?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}}class t{constructor(e){var t,s;s=e=>{"Escape"==e.code&&this.close(this._element.classList[1])},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._isOpen=!1,this._element=document.querySelector(e)}open(){this._isOpen=!0,document.addEventListener("keydown",this._handleEscClose),this._element.classList.add("popup_opened")}close(e){this._isOpen=!1;const t=document.querySelector(".".concat(e));t&&t.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}querySelector(e){return this._element.querySelector(e)}checkIfOpened(){return this._isOpen}setEventListeners(){this._element.querySelector(".popup__close-button").addEventListener("click",(e=>{this.close(e.target.closest(".popup").classList[1])})),this._element.addEventListener("mousedown",(e=>{e.target.classList.contains("popup_opened")&&this.close(e.target.classList[1])}))}}class s extends t{constructor(e,t){super(e),this._submit=t,this._form=this._element.querySelector(".popup__form"),this._inputs=this._element.querySelectorAll(".popup__input"),this._button=this._element.querySelector(".popup__button")}close(e){super.close(e),this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{this._button.textContent="Saving...",this._submit(e)}))}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e,t,s,n,r,o,a,c){i(this,"handleClick",(e=>{this._owner._id===this._user.id&&(this._deleteCard(),this._cardId?e.deleteCard(this._cardId).then((()=>{this._confirmPopup.close(".popup_confirm")})).finally((()=>{this._confirmPopup.querySelector(".popup__button").textContent="Yes"})).catch((e=>{console.log(e)})):e.getCardId().then((t=>{this._cardId=t[0]._id,e.deleteCard(this._cardId).then((()=>{this._confirmPopup.close(".popup_confirm")})).finally((()=>{this._confirmPopup.querySelector(".popup__button").textContent="Yes"})).catch((e=>{console.log(e)}))})),this._confirmPopup.querySelector(".popup__button").textContent="Deleting...")})),i(this,"_setEventListeners",(e=>{this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.contains("info__card_like-button_state_active")||(this._justLiked=!0),this._checkLikes(e)})),this._cardDelete.addEventListener("click",(()=>{this._confirmPopup.open(this.handleClick,e)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({url:this._link,caption:this._name})}))})),this._name=e,this._link=t,this._likes=n,this._cardId=s,this._handleImageClick=r,this._confirmPopup=o,this._owner=a,this._user=c}generateCard(e){return this._createCard(),this._setEventListeners(e),this._toggleLikes(),this._element}_createCard(){this._element=this._getTemplate();const e=this._element;return this._cardImage=e.querySelector(".card__image"),e.querySelector(".card__text").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt="A view of ".concat(this._name),this._likeNumber=this._element.querySelector(".card__like-number"),this._likeNumber.textContent=this.getLikeNumber(),e}_setCardLikes(){this._likeNumber.textContent=this.getLikeNumber()}_getTemplate(){const e=document.querySelector("#cardtemplate").content.querySelector(".card").cloneNode(!0);return this._cardDelete=e.querySelector(".card__delete"),this._owner&&this._owner._id!==this._user.id&&this._cardDelete.classList.add("card__delete_hidden"),e}getLikeNumber(){return this._likes?this._likes.length:0}_isLiked(){for(let e=0;e<this._likes.length;e++)return this._likes[e]._id===this._user.id}_checkLikes(e){this._justLiked?(this._likes&&(this._likes[this._likes.length]=this._user),this._cardId?e.addLike(this._cardId).then((()=>{this._likeNumber.textContent=this.getLikeNumber(),this._likeButton.classList.add("info__card_like-button_state_active")})):e.getCardId().then((t=>{this._cardId=t[0]._id,e.addLike(this._cardId).then((()=>{this._likeNumber.textContent=this.getLikeNumber(),this._likeButton.classList.add("info__card_like-button_state_active")}))})).catch((e=>{console.log(e)})),this._justLiked=!1):(this._likes.pop(),this._cardId&&e.removeLike(this._cardId).then((()=>{this._likeNumber.textContent=this.getLikeNumber(),this._likeButton.classList.remove("info__card_like-button_state_active")})).catch((e=>{console.log(e)}))),this._setCardLikes()}_toggleLikes(){if(this._likes)for(let e=0;e<this._likes.length;e++)this._likes[e]._id===this._user.id&&this._likeButton.classList.add("info__card_like-button_state_active")}_deleteCard(){this._element.remove()}}const r=new class{constructor(e){let{name:t,job:s,avatar:i}=e;this._about=document.querySelector(s),this._name=document.querySelector(t),this._avatar=document.querySelector(i)}getUserInfo(){return{name:this._name.textContent,job:this._about.textContent,avatar:this._avatar.src}}createMe(e){this.me=e,this.id=e._id}getMe(){return this.me}setUserInfo(e){this._about.textContent=e.about,this._name.textContent=e.name,e.avatar&&(this._avatar.src=e.avatar)}setUserUrl(e){this._avatar.src=e}}({name:".profile__name",job:".profile__about-me",avatar:".profile__avatar"}),o=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__image-button"),l=new s(".popup_profile",(function(e){e.preventDefault();const t={name:y.value,about:C.value};r.setUserInfo(t),E.changeUserInfo(y,C).finally((()=>{l.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),B()})),h=new class extends t{constructor(e,t){var s,i;super(e),i=()=>{super.close("popup_confirm"),this._button.removeEventListener("click",(()=>{this._handleClick(this._api)}))},(s="close")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._button=this._element.querySelector(t),this._isOpen=!1}open(e,t){super.open(),this._api=t,this._handleClick=e,this._button.addEventListener("click",(()=>{this._handleClick(this._api)}))}}(".popup_confirm",".popup__button"),_=new s(".popup_add",(function(e){e.preventDefault(),E.addCard(L,S).finally((()=>{_.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),f.toggleButtonState(!1),q.addItem({name:L.value,link:S.value,likes:[],owner:r.getMe()}),w()})),u=new s(".popup_avatar",(function(e){e.preventDefault(),r.setUserUrl(g.value),E.changeAvatar(g).finally((()=>{u.querySelector(".popup__button").textContent="Save"})).catch((e=>{console.log(e)})),U()})),d=new class extends t{constructor(e,t,s){var i,n;super(e),n=e=>{let{caption:t,url:s}=e;super.open(),this._image.setAttribute("src",s),this._image.setAttribute("alt",t),this._element.querySelector(".popup__text").textContent=t},(i="open")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this.open=n,this._url=t,this._caption=s,this._image=this._element.querySelector(".popup__image")}}(".popup_image"),p=document.getElementById("editform"),m=document.getElementById("addform"),b={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-massage_visible"},k=new e(b,document.getElementById("avatarform")),f=new e(b,m),v=new e(b,p),g=document.getElementById("avatar"),y=document.getElementById("popupname"),C=document.getElementById("popupaboutme"),L=document.getElementById("title"),S=document.getElementById("imagelink"),E=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():"Error ".concat(e.status)}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}addLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}removeLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}getCardId(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}addCard(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.value,link:t.value})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}changeAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.value})}).then((e=>this._checkResponse(e)))}changeUserInfo(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.value,about:t.value})}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"614bb6fa-36a6-4d24-9b95-72bf17bccf61","Content-Type":"application/json"}}),I=[],q=new class{constructor(e,t,s){let{items:i,renderer:n}=e;this._renderer=n,this._items=i,this._api=s,this._element=document.querySelector(t)}addItem(e){const t=this._renderer(e,this._api);this._element.prepend(t)}render(){for(let e=0;e<this._items.length;e++)this.addItem(this._items[e])}}({items:I,renderer:function(e,t){return new n(e.name,e.link,e.id,e.likes,x,h,e.owner,r).generateCard(t)}},".cards",E);function B(){if(l.checkIfOpened())l.close("popup_profile");else{l.open();const{name:e,job:t}=r.getUserInfo();y.value=e,C.value=t}}function w(){_.checkIfOpened()?_.close("popup_add"):_.open()}function U(){u.checkIfOpened()?u.close("popup_avatar"):u.open()}function x(e){let{url:t,caption:s}=e;d.open({url:t,caption:s})}l.setEventListeners(),h.setEventListeners(),_.setEventListeners(),u.setEventListeners(),d.setEventListeners(),k.enableValidation(),f.enableValidation(),v.enableValidation(),a.addEventListener("click",w),o.addEventListener("click",B),c.addEventListener("click",U),Promise.all([E.getUserInfo(),E.getInitialCards()]).then((e=>{let[t,s]=e;const i={};r.createMe(t),i.name=t.name,i.about=t.about,i.avatar=t.avatar,r.setUserInfo(i);for(let e=0;e<s.length;e++){const t=s.length-1,i={name:s[t-e].name,link:s[t-e].link,id:s[t-e]._id,likes:s[t-e].likes,owner:s[t-e].owner};I[e]=i}q.render()})).catch((e=>{console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEksRUFBT0UsRUFBTTNLLEdBQUcrQixLQUN0QkMsS0FBTXlJLEVBQU9FLEVBQU0zSyxHQUFHZ0MsS0FDdEIxQyxHQUFJbUwsRUFBT0UsRUFBTTNLLEdBQUd5QyxJQUNwQlAsTUFBT3VJLEVBQU9FLEVBQU0zSyxHQUFHa0MsTUFDdkJHLE1BQU9vSSxFQUFPRSxFQUFNM0ssR0FBR3FDLE9BRTNCZ0ksRUFBaUJySyxHQUFLb0ssRUFFMUJDLEVBQUFBLFlBQ0RwSCxPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybVRvVmFsaWRhdGUpIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybVRvVmFsaWRhdGU7XHJcbiAgICAgICAgdGhpcy5fc2V0U2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRTZXR0aW5ncyhzZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Zvcm1TZWxlY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUlucHV0RXZlbnQoZXZ0LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gaGFuZGxlcyB0aGUgZXJyb3IgbWFzc2FnZSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGlucHV0IHZhbGlkaXR5XHJcbiAgICBfaGFuZGxlSW5wdXRFdmVudChpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSwgdGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UsIHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gY2hlY2tlcyBpZiB0aGUgZm9ybSBpcyB2YWxpZFxyXG4gICAgX2NoZWNrRm9ybVZhbGlkaXR5KCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgICAgICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRMaXN0W2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gISB0aGlzIGZ1bmN0aW9uIGhpZGVzIHRoZSBlcnJvciBtYXNzYWdlXHJcbiAgICBfaGlkZUVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gc2hvd3MgdGhlIGVycm9yIG1hc3NhZ2VcclxuICAgIF9zaG93RXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICEgdGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBidXR0b24gc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBmb3JtIHZhbGlkaXR5XHJcbiAgICB2YWxpZGF0ZUJ1dHRvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gY2hlY2tlcyBpZiB0aGUgaW5wdXQgaXMgdmFsaWRcclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAhIHRoaXMgZnVuY3Rpb24gdG9nZ2xlcyBidXR0b24gc3RhdGVcclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlzVmFsaWQpIHtcclxuICAgICAgICBpZiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXBTZWxlY3Rvcn1gKTtcclxuICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2dC5jb2RlID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSh0aGlzLl9lbGVtZW50LmNsYXNzTGlzdFsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrSWZPcGVuZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzT3BlbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKGV2dC50YXJnZXQuY2xvc2VzdChcIi5wb3B1cFwiKS5jbGFzc0xpc3RbMV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoZXZ0LnRhcmdldC5jbGFzc0xpc3RbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKGNsYXNzU2VsZWN0b3IsIHN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKGNsYXNzU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdCA9IHN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZShwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdChldnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rLCBjYXJkSWQsIGxpa2VzLCBoYW5kbGVJbWFnZUNsaWNrLCBjb25maXJtUG9wdXAsIG93bmVyLCB1c2VyKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgICAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwID0gY29uZmlybVBvcHVwO1xyXG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICAgICAgdGhpcy5fdXNlciA9IHVzZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKiAqIHRoaXMgZnVuY3Rpb24gZ2VuZXJhdGVzIHRoZSBjYXJkIFxyXG4gICAgZ2VuZXJhdGVDYXJkKGFwaSkge1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUNhcmQoKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhhcGkpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUxpa2VzKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKiAqIHRoaXMgZnVuY3Rpb24gc2V0cyBhbGwgdGhlIGluZm8gb2YgdGhlIGNhcmRcclxuICAgIF9jcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLl9lbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBBIHZpZXcgb2YgJHsgdGhpcy5fbmFtZSB9YDtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtbnVtYmVyXCIpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgICAgICByZXR1cm4gY2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0Q2FyZExpa2VzKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAqICogdGhpcyBmdW5jdGlvbiBjcmVhdGVzIHRoZSBjYXJkIHRlbXBsYXRlXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkdGVtcGxhdGVcIilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuX2NhcmREZWxldGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgaWYgKCEodGhpcy5fb3duZXIuX2lkID09PSB0aGlzLl91c2VyLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZERlbGV0ZS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fZGVsZXRlX2hpZGRlblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGlrZU51bWJlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGlrZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2sgPSAoYXBpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX293bmVyLl9pZCA9PT0gdGhpcy5fdXNlci5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2FyZElkKSB7XHJcbiAgICAgICAgICAgICAgICBhcGkuZ2V0Q2FyZElkKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYXJkSWQgPSBkYXRhWzBdLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1Qb3B1cC5jbG9zZShcIi5wb3B1cF9jb25maXJtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLmNsb3NlKFwiLnBvcHVwX2NvbmZpcm1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1Qb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIikudGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9jb25maXJtUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vICogKiB0aGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnNcclxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9IChhcGkpID0+IHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImluZm9fX2NhcmRfbGlrZS1idXR0b25fc3RhdGVfYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9qdXN0TGlrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrTGlrZXMoYXBpKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlybVBvcHVwLm9wZW4odGhpcy5oYW5kbGVDbGljaywgYXBpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyB1cmw6IHRoaXMuX2xpbmssIGNhcHRpb246IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzTGlrZWQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saWtlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZXNbaV0uX2lkID09PSB0aGlzLl91c2VyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vICogKiB0aGlzIGZ1bmN0aW9uIHRvZ2dsZXMgbGlrZXMgZm9yIHRoZSBjYXJkc1xyXG4gICAgX2NoZWNrTGlrZXMoYXBpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2p1c3RMaWtlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VzW3RoaXMuX2xpa2VzLmxlbmd0aF0gPSB0aGlzLl91c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYXJkSWQpIHtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRMaWtlKHRoaXMuX2NhcmRJZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaW5mb19fY2FyZF9saWtlLWJ1dHRvbl9zdGF0ZV9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcGkuZ2V0Q2FyZElkKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYXJkSWQgPSBkYXRhWzBdLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmFkZExpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLmdldExpa2VOdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9qdXN0TGlrZWQgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlcy5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhcmRJZCkge1xyXG4gICAgICAgICAgICAgICAgYXBpLnJlbW92ZUxpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlrZU51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuZ2V0TGlrZU51bWJlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmZvX19jYXJkX2xpa2UtYnV0dG9uX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0Q2FyZExpa2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUxpa2VzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9saWtlcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpa2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbGlrZXNbaV0uX2lkID09PSB0aGlzLl91c2VyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaW5mb19fY2FyZF9saWtlLWJ1dHRvbl9zdGF0ZV9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKiAqIHRoaXMgZnVuY3Rpb24gZGVsZXRlcyB0aGUgY2FyZFxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxufTsiLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5cclxuLy8gISB1c2VyXHJcbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IG5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIiwgam9iOiBcIi5wcm9maWxlX19hYm91dC1tZVwiLCBhdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiIH0pO1xyXG5cclxuLy8gISBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtYnV0dG9uXCIpO1xyXG5cclxuLy8gISBwb3B1cFxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfcHJvZmlsZVwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmV4cG9ydCBjb25zdCBjb25maXJtUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKFwiLnBvcHVwX2NvbmZpcm1cIiwgXCIucG9wdXBfX2J1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfYWRkXCIsIGhhbmRsZUFkZEZvcm1TdWJtaXQpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9hdmF0YXJcIiwgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XHJcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX2ltYWdlXCIpO1xyXG5cclxuLy8gISBmb3Jtc1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0Zm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRmb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF2YXRhcmZvcm1cIik7XHJcbmNvbnN0IGZvcm1TZXR0aW5ncyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9pbnZhbGlkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yLW1hc3NhZ2VfdmlzaWJsZVwiXHJcbn07XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBhdmF0YXJGb3JtRWxlbWVudClcclxuZXhwb3J0IGNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGFkZEZvcm1FbGVtZW50KTtcclxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBlZGl0Rm9ybUVsZW1lbnQpO1xyXG5cclxuLy8gISBpbnB1dHNcclxuZXhwb3J0IGNvbnN0IGF2YXRhclVybElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvcHVwbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3B1cGFib3V0bWVcIik7XHJcblxyXG4vLyAhaW5wdXQgaGVscFxyXG5jb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKTtcclxuY29uc3QgaW1hZ2VMaW5rSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlbGlua1wiKTtcclxuXHJcblxyXG4vLyAhIGFwaVxyXG5jb25zdCBhcGlPcHRpb25zID0ge1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCI2MTRiYjZmYS0zNmE2LTRkMjQtOWI5NS03MmJmMTdiY2NmNjFcIixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xyXG5cclxuLy8gISBpbml0aWFsIGNhcmRzXHJcbmV4cG9ydCBjb25zdCBjYXJkc0RhdGEgPSBbXTtcclxuXHJcbi8vICEgc2VjdGlvblxyXG5leHBvcnQgY29uc3QgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBpdGVtczogY2FyZHNEYXRhLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LCBcIi5jYXJkc1wiLCBhcGkpO1xyXG5cclxuLy8gISBjcmVhdGUgY2FyZHNcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkT2JqLCBhcGkpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkT2JqLm5hbWUsXHJcbiAgICAgICAgY2FyZE9iai5saW5rLFxyXG4gICAgICAgIGNhcmRPYmouaWQsXHJcbiAgICAgICAgY2FyZE9iai5saWtlcyxcclxuICAgICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgICAgIGNvbmZpcm1Qb3B1cCxcclxuICAgICAgICBjYXJkT2JqLm93bmVyLFxyXG4gICAgICAgIHVzZXJJbmZvKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoYXBpKTtcclxufVxyXG5cclxuLy8gISBlZGl0IHBvcHVwIGFuZCBmb3JtIGhhbmRsaW5nXHJcbi8vICogdGhpcyBmdW5jdGlvbiB0b2dnbGVzIHRoZSBwb3B1cCB3aW5kb3cgZm9yIHRoZSBlZGl0IHdpbmRvdyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUVkaXRQb3B1cFdpbmRvdygpIHtcclxuICAgIGlmICghcHJvZmlsZVBvcHVwLmNoZWNrSWZPcGVuZWQoKSkge1xyXG4gICAgICAgIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgICAgICAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICAgICAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gICAgICAgIGpvYklucHV0LnZhbHVlID0gam9iO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwcm9maWxlUG9wdXAuY2xvc2UoXCJwb3B1cF9wcm9maWxlXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAqIGVkaXQgZm9ybSBoYW5kbGVcclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCB1c2VyT2JqID0geyBuYW1lOiBuYW1lSW5wdXQudmFsdWUsIGFib3V0OiBqb2JJbnB1dC52YWx1ZSB9O1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlck9iaik7XHJcblxyXG4gICAgYXBpLmNoYW5nZVVzZXJJbmZvKG5hbWVJbnB1dCwgam9iSW5wdXQpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRvZ2dsZUVkaXRQb3B1cFdpbmRvdygpO1xyXG59XHJcblxyXG4vLyAhIGFkZCBwb3B1cCBhbmQgZm9ybSBoYW5kbGluZ1xyXG4vLyAqIHRoaXMgZnVuY3Rpb24gdG9nZ2xlcyB0aGUgcG9wdXAgd2luZG93IGZvciB0aGUgYWRkIHdpbmRvdyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUFkZFBvcHVwV2luZG93KCkge1xyXG4gICAgaWYgKCFhZGRQb3B1cC5jaGVja0lmT3BlbmVkKCkpIHtcclxuICAgICAgICBhZGRQb3B1cC5vcGVuKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFkZFBvcHVwLmNsb3NlKFwicG9wdXBfYWRkXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gKiBhZGQgZm9ybSBoYW5kbGVcclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFkZEZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBhcGkuYWRkQ2FyZCh0aXRsZUlucHV0LCBpbWFnZUxpbmtJbnB1dClcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGFkZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKGZhbHNlKTtcclxuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKHtcclxuICAgICAgICBuYW1lOiB0aXRsZUlucHV0LnZhbHVlLFxyXG4gICAgICAgIGxpbms6IGltYWdlTGlua0lucHV0LnZhbHVlLFxyXG4gICAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgICBvd25lcjogdXNlckluZm8uZ2V0TWUoKVxyXG4gICAgfSk7XHJcblxyXG4gICAgdG9nZ2xlQWRkUG9wdXBXaW5kb3coKTtcclxufVxyXG5cclxuLy8gISBhdmF0YXIgcG9wdXAgYW5kIGZvcm0gaGFuZGxpbmdcclxuLy8gKiB0aGlzIGZ1bmN0aW9uIHRvZ2dsZXMgdGhlIHBvcHVwIHdpbmRvdyBmb3IgdGhlIGF2YXRhciB3aW5kb3cgXHJcbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVBdmF0YXJQb3B1cFdpbmRvdygpIHtcclxuICAgIGlmICghYXZhdGFyUG9wdXAuY2hlY2tJZk9wZW5lZCgpKSB7XHJcbiAgICAgICAgYXZhdGFyUG9wdXAub3BlbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhdmF0YXJQb3B1cC5jbG9zZShcInBvcHVwX2F2YXRhclwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gKiBhdmF0YXIgZm9ybSBoYW5kbGVcclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB1c2VySW5mby5zZXRVc2VyVXJsKGF2YXRhclVybElucHV0LnZhbHVlKTtcclxuXHJcbiAgICBhcGkuY2hhbmdlQXZhdGFyKGF2YXRhclVybElucHV0KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgYXZhdGFyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRvZ2dsZUF2YXRhclBvcHVwV2luZG93KCk7XHJcbn1cclxuXHJcbi8vICEgaW1hZ2UgcG9wdXAgaGFuZGxlXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHsgdXJsLCBjYXB0aW9uIH0pIHtcclxuICAgIGltYWdlUG9wdXAub3Blbih7IHVybCwgY2FwdGlvbiB9KTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZTogbmFtZVNlbGVjdG9yLCBqb2I6IGFib3V0U2VsZWN0b3IsIGF2YXRhcjogYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZU1lKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLm1lID0gZGF0YU9iajtcclxuICAgICAgICB0aGlzLmlkID0gZGF0YU9iai5faWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8odXNlckluZm8pIHtcclxuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgICAgIGlmICh1c2VySW5mby5hdmF0YXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJJbmZvLmF2YXRhcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlclVybChhdmF0YXJVcmwpIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyVXJsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBidXR0b25TZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihoYW5kbGVDbGljaywgYXBpKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX2FwaSA9IGFwaTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDbGljayA9IGhhbmRsZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLl9oYW5kbGVDbGljayh0aGlzLl9hcGkpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKFwicG9wdXBfY29uZmlybVwiKTtcclxuICAgICAgICB0aGlzLl9idXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5faGFuZGxlQ2xpY2sodGhpcy5fYXBpKSB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB1cmwsIGNhcHRpb24pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbiA9IGNhcHRpb247XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4gPSAoeyBjYXB0aW9uLCB1cmwgfSkgPT4ge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdXJsKTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgY2FwdGlvbik7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190ZXh0XCIpLnRleHRDb250ZW50ID0gY2FwdGlvbjtcclxuICAgIH1cclxufSIsIi8ve1xyXG4vLyBcdGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4vLyBcdGhlYWRlcnM6IHtcclxuLy8gXHRcdGF1dGhvcml6YXRpb246IFwiNjE0YmI2ZmEtMzZhNi00ZDI0LTliOTUtNzJiZjE3YmNjZjYxXCIsXHJcbi8vIFx0XHRDb250ZW50OiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4vLyBcdH1cclxuLy99XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykgeyAvLyBoZWFkZXIgPSB7YXV0aG9yaXphdGlvbjogLCBcIkNvbnRlbnQtVHlwZVwiOiB9XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGBFcnJvciAke3Jlcy5zdGF0dXN9YDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZElkKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb25cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRDYXJkKHRpdGxlSW5wdXQsIGltYWdlTGlua0lucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRpdGxlSW5wdXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGluazogaW1hZ2VMaW5rSW5wdXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VBdmF0YXIoYXZhdGFyVXJsSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyVXJsSW5wdXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVVzZXJJbmZvKG5hbWVJbnB1dCwgam9iSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZUlucHV0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0OiBqb2JJbnB1dC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IsIGFwaSkge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9hcGkgPSBhcGk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtLCB0aGlzLl9hcGkpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW0odGhpcy5faXRlbXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIiBpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG4gaW1wb3J0ICogYXMgY29uc3RzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbiBjb25zdHMucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiBjb25zdHMuY29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiBjb25zdHMuYWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIGNvbnN0cy5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gY29uc3RzLmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiBjb25zdHMuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiBjb25zdHMuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiBjb25zdHMuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuIC8vICEgY2FsbGluZyBldmVudCBsaXN0ZW5lcnNcclxuIGNvbnN0cy5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNvbnN0cy50b2dnbGVBZGRQb3B1cFdpbmRvdyk7XHJcblxyXG4gY29uc3RzLmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNvbnN0cy50b2dnbGVFZGl0UG9wdXBXaW5kb3cpO1xyXG5cclxuIGNvbnN0cy5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNvbnN0cy50b2dnbGVBdmF0YXJQb3B1cFdpbmRvdyk7XHJcblxyXG4gUHJvbWlzZS5hbGwoW2NvbnN0cy5hcGkuZ2V0VXNlckluZm8oKSwgY29uc3RzLmFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgICAgLnRoZW4oKFt1c2VyRGF0YSwgZkNhcmRzXSkgPT4ge1xyXG4gICAgICAgICBjb25zdCB1c2VyT2JqZWN0ID0ge307XHJcbiAgICAgICAgIGNvbnN0cy51c2VySW5mby5jcmVhdGVNZSh1c2VyRGF0YSk7XHJcbiAgICAgICAgIHVzZXJPYmplY3QubmFtZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICAgICAgIHVzZXJPYmplY3QuYWJvdXQgPSB1c2VyRGF0YS5hYm91dDtcclxuICAgICAgICAgdXNlck9iamVjdC5hdmF0YXIgPSB1c2VyRGF0YS5hdmF0YXI7XHJcbiAgICAgICAgIGNvbnN0cy51c2VySW5mby5zZXRVc2VySW5mbyh1c2VyT2JqZWN0KTtcclxuXHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZkNhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICBjb25zdCBsZW4gPSBmQ2FyZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgIGNvbnN0IGNhcmRPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgbmFtZTogZkNhcmRzW2xlbiAtIGldLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgbGluazogZkNhcmRzW2xlbiAtIGldLmxpbmssXHJcbiAgICAgICAgICAgICAgICAgaWQ6IGZDYXJkc1tsZW4gLSBpXS5faWQsXHJcbiAgICAgICAgICAgICAgICAgbGlrZXM6IGZDYXJkc1tsZW4gLSBpXS5saWtlcyxcclxuICAgICAgICAgICAgICAgICBvd25lcjogZkNhcmRzW2xlbiAtIGldLm93bmVyXHJcbiAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgY29uc3RzLmNhcmRzRGF0YVtpXSA9IGNhcmRPYmo7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgY29uc3RzLmNhcmRzU2VjdGlvbi5yZW5kZXIoKTtcclxuICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgfSk7Il0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybVRvVmFsaWRhdGUiLCJ0aGlzIiwiX2Zvcm0iLCJfc2V0U2V0dGluZ3MiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJfaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImV2dCIsIl9oYW5kbGVJbnB1dEV2ZW50IiwidGFyZ2V0IiwidmFsaWRhdGVCdXR0b24iLCJlcnJvck1lc3NhZ2UiLCJwYXJlbnRFbGVtZW50IiwiaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hpZGVFcnJvck1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJfc2hvd0Vycm9yTWVzc2FnZSIsImFkZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImlucHV0TGlzdCIsImlzVmFsaWQiLCJpIiwibGVuZ3RoIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjb2RlIiwiY2xvc2UiLCJfZWxlbWVudCIsIl9pc09wZW4iLCJkb2N1bWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJlbGVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsYXNzTmFtZSIsImNoZWNrSWZPcGVuZWQiLCJzZXRFdmVudExpc3RlbmVycyIsImNsb3Nlc3QiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJjbGFzc1NlbGVjdG9yIiwic3VibWl0Iiwic3VwZXIiLCJfc3VibWl0IiwiX2J1dHRvbiIsInJlc2V0IiwidGV4dENvbnRlbnQiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJjYXJkSWQiLCJsaWtlcyIsImhhbmRsZUltYWdlQ2xpY2siLCJjb25maXJtUG9wdXAiLCJvd25lciIsInVzZXIiLCJhcGkiLCJfb3duZXIiLCJfaWQiLCJfdXNlciIsIl9kZWxldGVDYXJkIiwiX2NhcmRJZCIsImRlbGV0ZUNhcmQiLCJ0aGVuIiwiX2NvbmZpcm1Qb3B1cCIsImZpbmFsbHkiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRDYXJkSWQiLCJkYXRhIiwiX2xpa2VCdXR0b24iLCJfanVzdExpa2VkIiwiX2NoZWNrTGlrZXMiLCJfY2FyZERlbGV0ZSIsImhhbmRsZUNsaWNrIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwidXJsIiwiX2xpbmsiLCJjYXB0aW9uIiwiX25hbWUiLCJfbGlrZXMiLCJnZW5lcmF0ZUNhcmQiLCJfY3JlYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90b2dnbGVMaWtlcyIsIl9nZXRUZW1wbGF0ZSIsImNhcmQiLCJzcmMiLCJhbHQiLCJfbGlrZU51bWJlciIsImdldExpa2VOdW1iZXIiLCJfc2V0Q2FyZExpa2VzIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2lzTGlrZWQiLCJhZGRMaWtlIiwicG9wIiwicmVtb3ZlTGlrZSIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhciIsImF2YXRhclNlbGVjdG9yIiwiX2Fib3V0IiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwiY3JlYXRlTWUiLCJkYXRhT2JqIiwibWUiLCJnZXRNZSIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VyVXJsIiwiYXZhdGFyVXJsIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsInByb2ZpbGVQb3B1cCIsInVzZXJPYmoiLCJuYW1lSW5wdXQiLCJ2YWx1ZSIsImpvYklucHV0IiwiY2hhbmdlVXNlckluZm8iLCJ0b2dnbGVFZGl0UG9wdXBXaW5kb3ciLCJidXR0b25TZWxlY3RvciIsIl9oYW5kbGVDbGljayIsIl9hcGkiLCJhZGRQb3B1cCIsImFkZENhcmQiLCJ0aXRsZUlucHV0IiwiaW1hZ2VMaW5rSW5wdXQiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2FyZHNTZWN0aW9uIiwiYWRkSXRlbSIsInRvZ2dsZUFkZFBvcHVwV2luZG93IiwiYXZhdGFyUG9wdXAiLCJhdmF0YXJVcmxJbnB1dCIsImNoYW5nZUF2YXRhciIsInRvZ2dsZUF2YXRhclBvcHVwV2luZG93IiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsInNldEF0dHJpYnV0ZSIsIl91cmwiLCJfY2FwdGlvbiIsImVkaXRGb3JtRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRm9ybUVsZW1lbnQiLCJmb3JtU2V0dGluZ3MiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsIm1ldGhvZCIsImF1dGhvcml6YXRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRzRGF0YSIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIml0ZW0iLCJwcmVwZW5kIiwicmVuZGVyIiwiY2FyZE9iaiIsImNvbnN0cyIsIlByb21pc2UiLCJhbGwiLCJ1c2VyRGF0YSIsImZDYXJkcyIsInVzZXJPYmplY3QiLCJsZW4iXSwic291cmNlUm9vdCI6IiJ9